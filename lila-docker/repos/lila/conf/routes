# Chesstory API/Analysis Only Routes
# Run `./lila.sh playRoutes` after modifying this file

# Account
GET   /                                controllers.Main.landing
GET   /account/info                    controllers.Account.info
GET   /api/account                     controllers.Account.apiMe
GET   /account/profile                 controllers.Account.profile
POST  /account/profile                 controllers.Account.profileApply
GET   /account/passwd                  controllers.Account.passwd
POST  /account/passwd                  controllers.Account.passwdApply
GET   /account/username                controllers.Account.username
POST  /account/username                controllers.Account.usernameApply
GET   /account/close                   controllers.Account.close
POST  /account/close                   controllers.Account.closeConfirm
GET   /account/delete                  controllers.Account.delete
POST  /account/delete                  controllers.Account.deleteConfirm


# Authentication
GET   /login                           controllers.Auth.login
POST  /login                           controllers.Auth.authenticate
GET   /signup                          controllers.Auth.signup
POST  /signup                          controllers.Auth.signupPost
GET   /password-reset                  controllers.Auth.passwordReset
POST  /password-reset                  controllers.Auth.passwordResetApply
GET   /logout                          controllers.Auth.logoutGet
POST  /logout                          controllers.Auth.logout
GET   /auth/magic-link                 controllers.Auth.magicLink
POST  /auth/magic-link/apply           controllers.Auth.magicLinkApply
GET   /auth/magic-link/sent            controllers.Auth.magicLinkSent
GET   /auth/check-email                controllers.Auth.checkYourEmail
POST  /auth/fix-email                  controllers.Auth.fixEmail
GET   /auth/password-reset/:token      controllers.Auth.passwordResetToken(token)
POST  /auth/password-reset/:token      controllers.Auth.passwordResetTokenApply(token)
GET   /auth/token/:token               controllers.Auth.loginWithToken(token)
POST  /auth/token/:token               controllers.Auth.loginWithTokenPost(token)

# Analysis and Study
GET   /analysis                        controllers.UserAnalysis.index
# Study
GET   /study                           controllers.Study.allDefault(page: Int ?= 1)
# GET   /study/search                    controllers.Study.search(text ?= "", page: Int ?= 1, order: Option[StudyOrder] ?= None)
GET   /study/all/:order                controllers.Study.all(order: StudyOrder, page: Int ?= 1)
# GET   /study/by-owner/:username/:order controllers.Study.byOwner(username: UserStr, order: StudyOrder, page: Int ?= 1)
GET   /study/mine/:order               controllers.Study.mine(order: StudyOrder, page: Int ?= 1)
# GET   /study/mine-likes/:order         controllers.Study.mineLikes(order: StudyOrder, page: Int ?= 1)
# GET   /study/mine-member/:order        controllers.Study.mineMember(order: StudyOrder, page: Int ?= 1)
# GET   /study/mine-public/:order        controllers.Study.minePublic(order: StudyOrder, page: Int ?= 1)
# GET   /study/mine-private/:order       controllers.Study.minePrivate(order: StudyOrder, page: Int ?= 1)
# GET   /study/by-topic/:name/:order     controllers.Study.byTopic(name, order: StudyOrder, page: Int ?= 1)
# GET   /study/topics                    controllers.Study.topics
# POST  /study/topics                    controllers.Study.setTopics
# GET   /study/staff-picks               controllers.Study.staffPicks
# POST  /study/:id/clone                 controllers.Study.cloneApply(id: StudyId)
# GET   /study/$id<\w{8}>.pgn            controllers.Study.pgn(id: StudyId)
POST  /study/$id<\w{8}>/delete         controllers.Study.delete(id: StudyId)
POST  /study/$id<\w{8}>/$chapterId<\w{8}>/import-pgn controllers.Study.importPgn(id: StudyId, chapterId: StudyChapterId)
GET   /study/$id<\w{8}>/$chapterId<\w{8}> controllers.Study.chapter(id: StudyId, chapterId: StudyChapterId)
GET   /study/:id                       controllers.Study.show(id: StudyId)
POST  /study                           controllers.Study.create
GET   /study/create                    controllers.Study.createAs

# Study API (no sockets, HTTP only)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/ana-move controllers.Study.anaMove(id: StudyId, chapterId: StudyChapterId)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/ana-drop controllers.Study.anaDrop(id: StudyId, chapterId: StudyChapterId)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/delete-node controllers.Study.deleteNode(id: StudyId, chapterId: StudyChapterId)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/promote controllers.Study.promoteNode(id: StudyId, chapterId: StudyChapterId)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/force-variation controllers.Study.forceVariationNode(id: StudyId, chapterId: StudyChapterId)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/comment controllers.Study.setNodeComment(id: StudyId, chapterId: StudyChapterId)
POST  /api/study/$id<\w{8}>/$chapterId<\w{8}>/bookmaker-sync controllers.Study.bookmakerSync(id: StudyId, chapterId: StudyChapterId)

# User Analysis
# GET   /analysis/help                   controllers.UserAnalysis.help
GET   /analysis/pgn/*pgn               controllers.UserAnalysis.pgn(pgn)
GET   /analysis/*something             controllers.UserAnalysis.parseArg(something)
GET   /embed/analysis                  controllers.UserAnalysis.embed
# GET   /api/cloud-eval                  controllers.Api.cloudEval

# LLM Analysis
POST  /api/llm/game-analysis-local     controllers.LlmController.analyzeGameLocal
POST  /api/llm/game-analysis-async     controllers.LlmController.analyzeGameAsync
GET   /api/llm/game-analysis-async/:jobId controllers.LlmController.analyzeGameAsyncStatus(jobId)
POST  /api/llm/bookmaker-position      controllers.LlmController.bookmakerPosition
POST  /api/llm/bookmaker-briefing      controllers.LlmController.bookmakerBriefing
GET   /api/llm/opening/masters          controllers.LlmController.openingMasters(fen: String)
GET   /api/llm/opening/master-pgn/:id   controllers.LlmController.openingMasterPgn(id)
GET   /support                         controllers.Main.support
GET   /plan                            controllers.Main.support

# User
# GET   /@/:username/all                 controllers.User.gamesAll(username: UserStr, page: Int ?= 1)
# GET   /@/:username/download            controllers.User.download(username: UserStr)
GET   /@/:username                     controllers.User.show(username: UserStr)

# Importer
GET   /import                          controllers.Importer.importGame
POST  /import                          controllers.Importer.sendGame
POST  /api/import                      controllers.Importer.apiSendGame

# Editor
GET   /editor                          controllers.Editor.index
GET   /editor.json                     controllers.Editor.data
GET   /editor/*urlFen                  controllers.Editor.load(urlFen)

# Preferences
POST  /pref/:name                      controllers.Pref.set(name)
GET   /api/pref/options                controllers.Pref.options
GET   /account/preferences/:categ      controllers.Pref.form(categ)
POST  /account/preferences             controllers.Pref.formApply

# API
# GET   /api/status                      controllers.Api.status
# GET   /api/user/:user                  controllers.Api.user(user: UserStr)

# Assets & Static
GET   /assets/*file                    controllers.ExternalAssets.at(path="public", file)
GET   /manifest.json                   controllers.Main.manifest
GET   /robots.txt                      controllers.Main.robots

GET   /contact                         controllers.Main.contact
GET   /privacy                         controllers.Main.privacy
GET   /terms                           controllers.Main.terms
GET   /source                          controllers.Main.source
GET   /legal/open-source               controllers.Main.source

# Catch-all
GET   /*path                           controllers.User.redirect(path)
