# Chesstory API/Analysis Only Routes
# Run `./lila.sh playRoutes` after modifying this file

# Account
GET   /account/info                    controllers.Account.info
GET   /api/account                     controllers.Account.apiMe
GET   /account/profile                 controllers.Account.profile
POST  /account/profile                 controllers.Account.profileApply
GET   /account/passwd                  controllers.Account.passwd
POST  /account/passwd                  controllers.Account.passwdApply
GET   /account/username                controllers.Account.username
POST  /account/username                controllers.Account.usernameApply
GET   /account/close                   controllers.Account.close
POST  /account/close                   controllers.Account.closeConfirm

# Authentication
GET   /login                           controllers.Auth.login
POST  /login                           controllers.Auth.authenticate
GET   /logout                          controllers.Auth.logoutGet
POST  /logout                          controllers.Auth.logout
GET   /signup                          controllers.Auth.signup
POST  /signup                          controllers.Auth.signupPost
GET   /signup/confirm/:token           controllers.Auth.signupConfirmEmail(token)
POST  /signup/confirm/:token           controllers.Auth.signupConfirmEmailPost(token)
GET   /password/reset                  controllers.Auth.passwordReset
POST  /password/reset/send             controllers.Auth.passwordResetApply
GET   /password/reset/confirm/:token   controllers.Auth.passwordResetConfirm(token)
POST  /password/reset/confirm/:token   controllers.Auth.passwordResetConfirmApply(token)
GET   /auth/magic-link                 controllers.Auth.magicLink
POST  /auth/magic-link/apply           controllers.Auth.magicLinkApply
GET   /auth/magic-link/sent            controllers.Auth.magicLinkSent
GET   /auth/check-email                controllers.Auth.checkYourEmail
POST  /auth/fix-email                  controllers.Auth.fixEmail
GET   /auth/token/:token               controllers.Auth.loginWithToken(token, referrer: Option[String] ?= None)
POST  /auth/token/:token               controllers.Auth.loginWithTokenPost(token, referrer: Option[String] ?= None)

# Analysis and Study
GET   /analysis                        controllers.UserAnalysis.index
GET   /analysis/:id                    controllers.Analyse.replay(id)
GET   /analysis/:id/:moves             controllers.Analyse.replayWithMoves(id, moves)
POST  /analysis/:id/request            controllers.Analyse.requestAnalysis(id)
# Study
GET   /study                           controllers.Study.allDefault(page: Int ?= 1)
GET   /study/search                    controllers.Study.search(text ?= "", page: Int ?= 1, order: Option[StudyOrder] ?= None)
GET   /study/all/:order                controllers.Study.all(order: StudyOrder, page: Int ?= 1)
GET   /study/by-owner/:username/:order controllers.Study.byOwner(username: UserStr, order: StudyOrder, page: Int ?= 1)
GET   /study/mine/:order               controllers.Study.mine(order: StudyOrder, page: Int ?= 1)
GET   /study/mine-likes/:order         controllers.Study.mineLikes(order: StudyOrder, page: Int ?= 1)
GET   /study/mine-member/:order        controllers.Study.mineMember(order: StudyOrder, page: Int ?= 1)
GET   /study/mine-public/:order        controllers.Study.minePublic(order: StudyOrder, page: Int ?= 1)
GET   /study/mine-private/:order       controllers.Study.minePrivate(order: StudyOrder, page: Int ?= 1)
GET   /study/by-topic/:name/:order     controllers.Study.byTopic(name, order: StudyOrder, page: Int ?= 1)
GET   /study/topics                    controllers.Study.topics
POST  /study/topics                    controllers.Study.setTopics
GET   /study/staff-picks               controllers.Study.staffPicks
POST  /study/:id/clone                 controllers.Study.cloneApply(id: StudyId)
GET   /study/$id<\w{8}>.pgn            controllers.Study.pgn(id: StudyId)
POST  /study/$id<\w{8}>/delete         controllers.Study.delete(id: StudyId)
GET   /study/$id<\w{8}>/$chapterId<\w{8}> controllers.Study.chapter(id: StudyId, chapterId: StudyChapterId)
GET   /study/:id                       controllers.Study.show(id: StudyId)
POST  /study                           controllers.Study.create
GET   /study/create                    controllers.Study.createAs

# User Analysis
GET   /analysis/help                   controllers.UserAnalysis.help
GET   /analysis/pgn/*pgn               controllers.UserAnalysis.pgn(pgn)
GET   /analysis/*something             controllers.UserAnalysis.parseArg(something)
GET   /embed/analysis                  controllers.UserAnalysis.embed
# GET   /api/cloud-eval                  controllers.Api.cloudEval

# LLM Analysis
POST  /api/llm/game-analysis-local     controllers.LlmController.analyzeGameLocal
POST  /api/llm/game-analysis           controllers.LlmController.analyzeGame
POST  /api/llm/position-analysis       controllers.LlmController.analyzePosition

# User
GET   /@/:username/all                 controllers.User.gamesAll(username: UserStr, page: Int ?= 1)
GET   /@/:username/download            controllers.User.download(username: UserStr)
GET   /@/:username                     controllers.User.show(username: UserStr)
GET   /player                          controllers.User.list
GET   /api/player/autocomplete         controllers.User.autocomplete
GET   /api/player                      controllers.User.apiList
GET   /player/online                   controllers.User.online

# Game
# GET   /game/export/$gameId<\w{8}>.pgn  controllers.Game.exportOne(gameId: GameId)
# POST  /game/delete/$gameId<\w{8}>      controllers.Game.delete(gameId: GameId)

# Importer
GET   /import                          controllers.Importer.importGame
POST  /import                          controllers.Importer.sendGame
POST  /api/import                      controllers.Importer.apiSendGame

# Editor
GET   /editor                          controllers.Editor.index
GET   /editor.json                     controllers.Editor.data
GET   /editor/*urlFen                  controllers.Editor.load(urlFen)

# Preferences
POST  /pref/:name                      controllers.Pref.set(name)
GET   /account/preferences/:categ      controllers.Pref.form(categ)
POST  /account/preferences             controllers.Pref.formApply

# OAuth
GET    /oauth                          controllers.OAuth.authorize
POST   /oauth                          controllers.OAuth.authorizeApply
POST   /api/token                      controllers.OAuth.tokenApply
DELETE /api/token                      controllers.OAuth.tokenRevoke
GET    /account/oauth/token            controllers.OAuthToken.index
GET    /account/oauth/token/create     controllers.OAuthToken.create
POST   /account/oauth/token/create     controllers.OAuthToken.createApply
POST   /account/oauth/token/:id/delete controllers.OAuthToken.delete(id)

# API
# GET   /api/status                      controllers.Api.status
# GET   /api/user/:user                  controllers.Api.user(user: UserStr)
# GET   /api/game/:id                    controllers.Api.game(id: GameId)
# GET   /api/stream/game/:id             controllers.Api.moveStream(id: GameId)

# Assets & Static
GET   /assets/*file                    controllers.ExternalAssets.at(path="public", file)
GET   /manifest.json                   controllers.Main.manifest
GET   /robots.txt                      controllers.Main.robots

# Catch-all
GET   /*path                           controllers.User.redirect(path)
